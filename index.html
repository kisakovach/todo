<!DOCTYPE html>
<html>
<head>
 <meta charset='utf-8'>
 <title>Backbone todo project</title>
 <link rel="stylesheet" type="text/css" href="css/main.css">
</head>
 <body>
    <script type="text/template" id="task_li">
      <td><%= title%></td><td><%= deadline%></td> 
      <td><input type = 'checkbox' value = <%=completed%> <%=checked%> ></td> 
    </script>
    <script type="text/temolate" id ="add_template">
      <form  id = "task_form" method="post">
        <div class = "add">
          <label for = "title">Название</label>
          <input type = "text" id = "title" name ="title" >
        </div> 
        <div class = "add">  
          <label for = "text">Задача:</label>
          <textarea id = "text" name ="text">Описание задачи</textarea>
        </div>
        <div class = "add">  
          <label for = "deadline">Дата исполнения:</label>
          <input type = "text" id = "deadline" name ="deadline" class = "datepicker">
        </div>
        <div class = "add">
          <input type = "button" id ="submit" value ="Добавить задачу">
        </div>
      </form>
    </script>
    <header>
     <div class ="header">
      <h1>Hello Tasks</h1>
     </div>
    </header>
    <div id = "main"></div>

  <footer>
    <div class= "footer">
      <div>
        <button id='list_button' class = 'left'>Список</button><button >Переключить</button><button id ='add_button'>Добавить</button><button class = 'right'>Время</button>
      </div>
    </div>
  </footer>
</body>
<script type="text/javascript" src = "js/jquery.js"></script>
<script type="text/javascript" src = "js/jquery-ui.js"></script>
<script type="text/javascript" src = "js/underscore.js"></script>
<script type="text/javascript" src = "js/backbone.js"></script>
<script type="text/javascript" src = "js/main.js"></script>
<script type="text/javascript" src = "js/models.js"></script>
<script type="text/javascript" src = "js/views.js"></script>
<script type="text/javascript" src = "js/collections.js"></script>
<script type="text/javascript" src = "js/router.js"></script>
<script>
/*
localStorage.setItem(App.localKey,'[{"id":4,"title":"to do TO DO","text":"","deadline":"0000-00-00 00:00:00","completed":0},{"id":5,"title":"Сходить на работу","text":"","deadline":"0000-00-00 00:00:00","completed":0},{"id":8,"title":"Читать книгу","text":"","deadline":"0000-00-00 00:00:00","completed":0},{"id":9,"title":"to do some time","text":"","deadline":"0000-00-00 00:00:00","completed":0},{"id":10,"title":"Go to sleep","text":"","deadline":"0000-00-00 00:00:00","completed":0},{"id":13,"title":"fackin hack","text":"","deadline":"0000-00-00 00:00:00","completed":1},{"id":16,"title":"Что тосделать","text":"Описание задачи","deadline":"0000-00-00 00:00:00","completed":0},{"id":17,"title":"еінфенв","text":"сммолсолм Описание задачи","deadline":"2021-11-20 15:00:00","completed":0},{"id":18,"title":"Тестовая очередб","text":"Описание задачи","deadline":"2015-11-25 00:00:00","completed":0},{"id":19,"title":"Груповой тест","text":"Описание задачи","deadline":"2021-11-20 15:00:00","completed":0},{"id":20,"title":"Тест 2","text":"Описание задачи","deadline":"2015-11-25 00:00:00","completed":0},{"id":21,"title":"Еще одна","text":"Надеюсь сработает","deadline":"2021-11-20 15:00:00","completed":0},{"id":22,"title":"dasfs ","text":"Описание задачи","deadline":"2015-11-25 00:00:00","completed":0},{"id":23,"title":"йуцуй","text":"Описание задачи ивимим","deadline":"2015-11-25 00:00:00","completed":0},{"id":24,"title":"fjfkdsjkf","text":"Описание задачи","deadline":"2015-11-25 21:19:00","completed":0},{"id":25,"title":"Testovaja tranzaccija","text":"Описание задачи: Сегодн доделать сохранение в локал сторедж ","deadline":"2021-11-20 11:00:00","completed":0}]');
*/

 App.router = new App.Routers.Router();
 Backbone.history.start();
 App.startView = new App.Views.Start();
 
 App.tasks = new App.Collections.Tasks();
 App.tasks.fetchFromLocal();

  vent.on("check_task",App.tasks.saveToLocal,App.tasks);
 App.addTaskForm = new App.Views.AddTask({collection: App.tasks});
 
 App.taskListView = new App.Views.Tasks({collection: App.tasks});

 /*App.startView.listenTo(App.tasks, "sync", function(){
  
   App.addTaskForm = new App.Views.AddTask({collection: App.tasks});
   App.taskListView = new App.Views.Tasks({collection: App.tasks});
   
 });
 
 App.tasks.fetch();
*/
</script>

</html>
